{
    "$schema" : "https://json-schema.org/draft/2020-12/schema",
    "$id" : "https://cybersecuritypoet.github.io/koala-json-schema/router.schema.json",
    "title" : "Service definition",
    "description" : "",
    "type" : "object",
    "additionalProperties" : false,
    "properties":
    {
        "skip":
        {
            "type" : ["boolean","null"],
            "description" : "Skip object."
        },
        "name":
        {
            "type" : "string",
            "description" : "Name of the service instance",
            "pattern" : "^[a-zA-Z0-9_\\-]+$"
        },
        "desc":
        {
            "type" : ["string","null"],
            "description" : "Objects description."
        },
        "templates":
        {
            "type" : ["array","null"],
            "description" : "Templates to be applied to the object.",
            "items" :
            {
                "type" : "string"
            }
        },
        "network":
        {
            "type" : "string",
            "description": "Network name, for network-bound services."
        },
        "endpoints":
        {
            "type" : ["array","null"],
            "description" : "List of endpoints for the service.",
            "items" :
            {
                "type" : "object",
                "additionalProperties" : false,
                "properties" :
                {
                    "proto":
                    {
                        "type" : "string",
                        "description" : "Protocol for the endpoint."
                    },
                    "network":
                    {
                        "type" : "string",
                        "description" : "Network name, for network-bound endpoints."
                    },
                    "port":
                    {
                        "type" : "integer",
                        "description" : "TCP/UDP port to use for the service."
                    },
                    "port_range":
                    {
                        "type" : "object",
                        "additionalProperties" : false,
                        "description" : "TCP/UDP port range to use for the service.",
                        "properties":
                        {
                            "start":
                            {
                                "type" : "integer",
                                "minimum" : 1,
                                "maximum" : 65535
                            },
                            "end":
                            {
                                "type" : "integer",
                                "minimum" : 1,
                                "maximum" : 65535
                            }
                        }
                    },
                    "program":
                    {
                        "type" : "string",
                        "description" : "Program path/name that runs the service listener."
                    }
                }
            }
        }
    }
}